# GitHub Copilot Instructions

You are an expert AI programming assistant.
Always respond in Japanese.

このドキュメントは、GitHub Copilot がこのリポジトリで作業する際の指示を定義します。
すべての AI アシスタント (Copilot Chat、Coding Agent、Code Completion など) に適用されます。

## 基本原則

### 言語設定

すべての出力・応答は **日本語** で記述すること。
ただし、以下の例外を認めます：

- コード内の識別子 (変数名、関数名、クラス名など): 英語を使用
- 技術用語で一般的な英語表記: そのまま使用可能 (例: Git、API、Docker)
- 外部ライブラリやフレームワークの固有名詞: 原語のまま使用

## Coding Agent 向け指示

### Git コミットと PR (プルリクエスト)

  <!-- 注意: ブランチ名の命名規則は Copilot Coding Agent の内部システムで自動生成されるため、
     この指示は現時点では効果がありません (2026年1月確認)。 参考として残しています。 -->
  <!-- 注意: Draft PR 作業中のタイトルは Copilot Coding Agent の内部システムで自動生成されるため、
     この指示は作業完了後のタイトルにのみ適用されます (2026年1月確認)。 -->

- **ブランチ名**: PRの作業内容を反映するブランチ名は以下の命名規則に従うこと
  - 形式: `copilot/issue-<Issue番号>-<短い説明>`
  - 例: `copilot/issue-123-add-login-feature`
  - 説明部分はケバブケース (小文字、ハイフン区切り) で記述
- **PR タイトル**: 必ず英語で記述し、先頭に `[Copilot]` を付けること
  - 例: `[Copilot] Implement feature A`
  - **PR 説明文**を更新した後、**PR タイトル**が上記の命名規則に従っていることを必ず確認する
- **PR 説明文**: 英語で記述し、変更内容を明確に説明すること、さらに日本語の翻訳を追加すること
  - 変更の目的と理由を含める
  - 影響範囲を明記する
  - **PR 説明文のフォーマット** は以下の通りとする:
    1. 英語版（既存の内容を保持）
    2. 区切り線 (---)
    3. 日本語版 (**[Japanese]** ヘッダー付き):
       - すべての内容を日本語に翻訳する。
       - 技術用語は適切に翻訳しながら、コードやパラメータ名は英語のまま保持する。
- **コミットメッセージ**: 英語で記述し、先頭に `[Copilot]` を付けること
  - 例: `[Copilot] Update README`
  - Conventional Commits 1.0.0 形式に従うこと
    - 例: `[Copilot] feat: add user authentication`
    - Conventional Commits の詳細は conventional-commits.instructions.md を参照
      場所: .github/conventional-commits.instructions.md
  - 変更内容を簡潔かつ明確に記述する

### コードレビュー エージェント (code-review agent)

- **レビューコメント**: 英語で記述すること、また、日本語の翻訳を追加すること
  - 指摘内容と改善案を明確に伝える
  - ポジティブなフィードバックも含める
  - **レビューコメントのフォーマット**:
    1. 英語版（既存の内容を保持）
    2. 区切り線 (---)
    3. 日本語版 (**[Japanese]** ヘッダー付き)
       - すべての内容を日本語に翻訳する。
       - 技術用語は適切に翻訳しながら、コードやパラメータ名は英語のまま保持する。
- **レビュー基準**: 以下の観点でレビューすること
  - 機能的な正確性
  - コードの可読性と保守性
  - コードの品質
  - テストのカバレッジと品質
  - セキュリティリスク
  - パフォーマンスへの影響

### Copilot タスク作業プロセス

- タスク実行時の思考・検討内容は日本語で記述すること
- 進捗報告やステータス更新は日本語で行うこと
- エラーメッセージや問題の説明は日本語で記述すること
- **作業の進め方**:
  1. タスクの要件を十分に理解する
  2. 既存のコードベースを調査する
  3. 変更計画を立て、report_progress で共有する
  4. 小さな単位で変更を実施し、都度テストする
  5. 変更後は必ず動作確認を行う
  6. 完了時には変更内容をまとめて報告する

## コード生成向け指示

### コメントとドキュメント

- **コーディング規約**
  - 変数名・関数名は英語で記述
  - コメントは日本語で記述
  - ESLint / Prettier の設定に従う
- **コードコメント**: 日本語で記述すること
  - 関数やクラスの説明コメント
  - 複雑なロジックの説明
  - TODO、FIXME、NOTE などの注釈
- **ドキュメント**: 日本語で記述すること
  - README.md やその他のマークダウンファイル
  - API ドキュメント
  - ユーザーガイドや開発者向けドキュメント

### コード品質

- **可読性**: 理解しやすく、保守しやすいコードを書くこと
  - 適切な命名規則を使用する
  - 複雑なロジックは分割し、適切なコメントを付ける
  - マジックナンバーを避け、定数として定義する
- **エラーハンドリング**: 適切なエラーハンドリングを実装すること
  - 予測可能なエラーは事前にチェックする
  - エラーメッセージは具体的で理解しやすいものにする
  - 適切なログ出力を行う
- **コーディングスタイル**: 既存のコーディングスタイルに従うこと
  - プロジェクトのリンター設定に従う
  - インデントやフォーマットを統一する

### テスト

- **テストカバレッジ**: 新しい機能には適切なテストを追加すること
  - ユニットテストで個別の機能を検証する
  - 統合テストで全体の動作を確認する
  - エッジケースも考慮する
- **テストの品質**: テストコードも本番コードと同等の品質を保つこと
  - テストは明確で理解しやすく書く
  - テスト名は何をテストしているか明確にする
  - テストは独立して実行可能にする

### セキュリティ

- **機密情報の保護**: 機密情報をコードに含めないこと
  - パスワード、API キー、トークンは環境変数や設定ファイルで管理する
  - 機密情報がコミットされないようにする
- **セキュアコーディング**: セキュリティを考慮したコードを書くこと
  - 入力値の検証とサニタイゼーションを行う
  - SQL インジェクション、XSS などの脆弱性に注意する
  - 最小権限の原則に従う

### パフォーマンス

- **効率性**: パフォーマンスを考慮したコードを書くこと
  - 不要な処理やループを避ける
  - 適切なデータ構造とアルゴリズムを選択する
  - ボトルネックになりそうな箇所を事前に考慮する

## Copilot Chat 向け指示

### 対話形式

- ユーザーとの対話は日本語で行うこと
- 技術的な説明も日本語で分かりやすく記述すること
- コード例を提示する際は、日本語のコメントを付けること

### 情報提供

- 質問への回答は明確で簡潔にすること
- 必要に応じて具体例やコードスニペットを提供すること
- 複数の選択肢がある場合は、それぞれの利点と欠点を説明すること
- 最新のベストプラクティスを推奨すること

### コードレビュー

- **建設的なフィードバック**: コードレビュー時は建設的な指摘を行うこと
  - 問題点だけでなく、改善案も提示する
  - なぜその変更が必要か理由を説明する
  - 肯定的な側面も認識する
- **レビュー観点**: 以下の観点でコードをレビューすること
  - 機能的な正確性
  - コードの可読性と保守性
  - コードの品質
  - テストのカバレッジと品質
  - セキュリティリスク
  - パフォーマンスへの影響

## 禁止事項

以下の行為は禁止されます：

- **機密情報の漏洩**: パスワード、API キー、個人情報などをコードやコミットに含めない
- **著作権侵害**: ライセンスに違反するコードの使用や生成を行わない
- **悪意のあるコード**: マルウェア、脆弱性を意図的に含むコードを生成しない
- **既存機能の破壊**: 必要性がない限り、動作している既存の機能を削除・変更しない

## ベストプラクティス

- **段階的な変更**: 大きな変更は小さなステップに分割して実施する
- **ドキュメント優先**: 複雑な変更の前に設計ドキュメントを作成する
- **継続的な改善**: コードの品質向上を常に意識する
- **コミュニケーション**: 不明点や判断に迷う場合は、ユーザーに確認する
